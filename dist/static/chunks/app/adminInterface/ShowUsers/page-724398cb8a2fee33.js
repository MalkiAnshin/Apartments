(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{26787:function(e,t,s){Promise.resolve().then(s.bind(s,73427))},73427:function(e,t,s){"use strict";s.r(t);var l=s(57437),r=s(2265);t.default=()=>{let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(null),[c,d]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[i,h]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1),[b,g]=(0,r.useState)(null),p=async()=>{try{let e=await fetch("/api/AdminInterface/ShowUsers");if(!e.ok)throw Error("תגובה מהשרת לא הייתה תקינה");let s=await e.json();t(s)}catch(e){a("שגיאה בזמן Fetch המשתמשים: "+(e instanceof Error?e.message:"אירעה שגיאה לא ידועה")),console.error("שגיאה בזמן Fetch המשתמשים:",e)}},j=async e=>{try{let t=await fetch("/api/AdminInterface/users/".concat(e,"/contracts"));if(!t.ok)throw Error("שגיאה בזמן קבלת החוזים");let s=await t.json();d(s),h(!0)}catch(t){console.error("שגיאה בזמן Fetch חוזים של המשתמש ".concat(e,":"),t)}},N=async e=>{try{let t=await fetch("/api/AdminInterface/users/".concat(e,"/apartments"));if(!t.ok)throw Error("שגיאה בזמן קבלת הדירות");let s=await t.json();o(s),m(!0)}catch(t){console.error("שגיאה בזמן Fetch דירות של המשתמש ".concat(e,":"),t)}};(0,r.useEffect)(()=>{p()},[]);let u=(e,t)=>{let s="/contracts/".concat(e,"/").concat(t,"/contract.pdf");try{window.open(s,"_blank"),console.log("נפתח חלון חדש עם ה-PDF")}catch(e){console.error("שגיאה בפתיחת ה-PDF:",e)}},f=(e,t)=>{let s="/contracts/".concat(e,"/").concat(t,"/id_image.png"),l="/contracts/".concat(e,"/").concat(t,"/id_image.jpg"),r=e=>{window.open(e,"_blank")};r(s),r(l)};return(0,l.jsx)("div",{className:"bg-black/70 text-gold min-h-screen flex flex-col items-center p-6",children:(0,l.jsxs)("div",{className:"w-full max-w-6xl mx-auto",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gold text-center border-b-2 border-gold pb-2 shadow-gold-glow",children:"רשימת משתמשים"}),s&&(0,l.jsxs)("div",{className:"text-red-600 mb-4 text-center",children:["שגיאה: ",s]}),e.length>0?(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-transparent border border-gold rounded-lg overflow-hidden shadow-lg mb-6",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-gold text-gold bg-transparent",children:[(0,l.jsx)("th",{className:"text-left p-4",children:"סוג משתמש"}),(0,l.jsx)("th",{className:"text-left p-4",children:"תפקיד"}),(0,l.jsx)("th",{className:"text-left p-4",children:"אימייל"}),(0,l.jsx)("th",{className:"text-left p-4",children:"שם משתמש"}),(0,l.jsx)("th",{className:"text-left p-4",children:"מזהה משתמש"}),(0,l.jsx)("th",{className:"text-center p-4",children:"פעולות"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{className:"border-b border-gold hover:bg-gold/10 transition text-shadow",children:[(0,l.jsx)("td",{className:"p-4 text-gold",children:e.user_type}),(0,l.jsx)("td",{className:"p-4 text-gold",children:e.role}),(0,l.jsx)("td",{className:"p-4 text-gold",children:e.email}),(0,l.jsx)("td",{className:"p-4 text-gold",children:e.username}),(0,l.jsx)("td",{className:"p-4 text-gold",children:e.identity_number}),(0,l.jsxs)("td",{className:"p-4 flex justify-center items-center space-x-4",children:[(0,l.jsx)("button",{className:"bg-transparent border border-gold text-gold py-1 px-3 rounded hover:bg-gold hover:text-black transition shadow-gold-glow",onClick:()=>j(e.identity_number),children:"חוזים"}),(0,l.jsx)("button",{className:"bg-transparent border border-gold text-gold py-1 px-3 rounded hover:bg-gold hover:text-black transition shadow-gold-glow",onClick:()=>N(e.identity_number),children:"דירות"})]})]},e.identity_number))})]})}):(0,l.jsx)("p",{className:"text-gray-400 text-center",children:"...טוען"}),i&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/70 flex justify-center items-center z-50",children:(0,l.jsxs)("div",{className:"bg-black text-gold p-6 rounded-lg max-w-4xl w-full",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"חוזים"}),(0,l.jsx)("button",{onClick:()=>h(!1),className:"text-red-500 mb-4 text-lg",children:"סגור"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-transparent border border-gold rounded-lg overflow-hidden shadow-lg",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-gold text-gold",children:[(0,l.jsx)("th",{className:"p-4",children:"מזהה נכס"}),(0,l.jsx)("th",{className:"p-4",children:"סוג נכס"}),(0,l.jsx)("th",{className:"p-4 text-center",children:"תאריך"})]})}),(0,l.jsx)("tbody",{children:c.map((e,t)=>(0,l.jsxs)("tr",{className:"border-b border-gold hover:bg-gold/10 transition",children:[(0,l.jsx)("td",{className:"p-4 text-gold",children:e.contract_id}),(0,l.jsx)("td",{className:"p-4 text-gold",children:e.property_type}),(0,l.jsx)("td",{className:"p-4 text-gold",children:e.signed_date}),(0,l.jsx)("td",{className:"p-4 text-center",children:(0,l.jsx)("button",{className:"bg-transparent border border-gold text-gold py-1 px-3 rounded hover:bg-gold hover:text-black transition shadow-gold-glow",onClick:()=>u(e.property_type,e.contract_id),children:"הצגת החוזה"})}),(0,l.jsx)("td",{className:"p-4 text-center",children:(0,l.jsx)("button",{className:"bg-transparent border border-gold text-gold py-1 px-3 rounded hover:bg-gold hover:text-black transition shadow-gold-glow",onClick:()=>f(e.property_type,e.contract_id),children:"הצגת צילום ת.ז."})})]},t))})]})})]})}),x&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/70 flex justify-center items-center z-50",children:(0,l.jsxs)("div",{className:"bg-black text-gold p-6 rounded-lg max-w-6xl w-full",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"דירות"}),(0,l.jsx)("button",{onClick:()=>m(!1),className:"text-red-500 mb-4 text-lg",children:"סגור"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-transparent border border-gold rounded-lg overflow-hidden shadow-lg",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-gold text-gold text-left",children:[(0,l.jsx)("th",{className:"p-4",children:"עיר"}),(0,l.jsx)("th",{className:"p-4",children:"שכונה"}),(0,l.jsx)("th",{className:"p-4",children:"מחיר"}),(0,l.jsx)("th",{className:"p-4",children:"חדרים"}),(0,l.jsx)("th",{className:"p-4",children:"כתובת"}),(0,l.jsx)("th",{className:"p-4",children:"קומה"}),(0,l.jsx)("th",{className:"p-4",children:"מרפסת"}),(0,l.jsx)("th",{className:"p-4",children:"מעלית"}),(0,l.jsx)("th",{className:"p-4",children:"מחסן"}),(0,l.jsx)("th",{className:"p-4",children:"חניה"}),(0,l.jsx)("th",{className:"p-4",children:"מוכר"})]})}),(0,l.jsx)("tbody",{children:n.map((e,t)=>(0,l.jsxs)("tr",{className:"border-b border-gold hover:bg-gold/10 transition",children:[(0,l.jsx)("td",{className:"p-4",children:e.city}),(0,l.jsx)("td",{className:"p-4",children:e.neighborhood}),(0,l.jsx)("td",{className:"p-4",children:e.price}),(0,l.jsx)("td",{className:"p-4",children:e.rooms}),(0,l.jsx)("td",{className:"p-4",children:e.address}),(0,l.jsx)("td",{className:"p-4",children:e.floor}),(0,l.jsx)("td",{className:"p-4",children:e.has_balcony?"כן":"לא"}),(0,l.jsx)("td",{className:"p-4",children:e.elevator?"כן":"לא"}),(0,l.jsx)("td",{className:"p-4",children:e.warehouse?"כן":"לא"}),(0,l.jsx)("td",{className:"p-4",children:e.parking?"כן":"לא"}),(0,l.jsx)("td",{className:"p-4",children:e.contact_seller})]},t))})]})})]})})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=26787)}),_N_E=e.O()}]);