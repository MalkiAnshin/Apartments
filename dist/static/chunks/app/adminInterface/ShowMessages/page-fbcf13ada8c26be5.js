(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{62073:function(e,t,s){Promise.resolve().then(s.bind(s,90298))},90298:function(e,t,s){"use strict";s.r(t);var a=s(57437),r=s(2265);t.default=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(""),c=async()=>{try{let e=await fetch("/api/AdminInterface/ShowMessages");if(!e.ok)throw Error("תגובה מהשרת לא הייתה תקינה");let s=await e.json();t(s)}catch(e){e instanceof Error?l("שגיאה בזמן Fetch המשתמשים: "+e.message):l("אירעה שגיאה לא ידועה"),console.error("שגיאה בזמן Fetch המשתמשים:",e)}},d=async s=>{try{if(!(await fetch("/api/AdminInterface/ShowMessages",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageId:s})})).ok)throw Error("Failed to delete message");t(e.filter(e=>e.message_id!==s))}catch(e){console.error("Error deleting message:",e),l("Error deleting message: "+(e instanceof Error?e.message:"Unknown error"))}};return(0,r.useEffect)(()=>{c()},[]),(0,a.jsx)("div",{className:"bg-black text-white min-h-screen flex flex-col items-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gold text-center",children:"הודעות למערכת"}),s&&(0,a.jsxs)("div",{className:"text-red-600 mb-4 text-center",children:["שגיאה: ",s]}),e.length>0?(0,a.jsx)("div",{className:"overflow-x-auto w-full",children:(0,a.jsxs)("table",{className:"min-w-full bg-gray-800 border border-gold table-auto",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gold",children:[(0,a.jsx)("th",{className:"text-left p-4 text-sm md:text-base",children:"מזהה משתמש"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm md:text-base",children:"שם משתמש"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm md:text-base",children:"אימייל"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm md:text-base",children:"תאריך"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm md:text-base",children:"הודעה"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm md:text-base",children:"פעולות"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gold",children:[(0,a.jsx)("td",{className:"p-4 text-xs md:text-sm",children:e.user_id}),(0,a.jsx)("td",{className:"p-4 text-xs md:text-sm",children:e.username}),(0,a.jsx)("td",{className:"p-4 text-xs md:text-sm",children:e.email}),(0,a.jsx)("td",{className:"p-4 text-xs md:text-sm",children:e.contact_date}),(0,a.jsx)("td",{className:"p-4 text-xs md:text-sm",children:e.message_body}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("button",{onClick:()=>d(e.message_id),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 text-xs md:text-sm",children:"מחק"})})]},e.contact_id||"default-key"))})]})}):(0,a.jsx)("p",{className:"text-gray-400 text-center",children:"...טוען"})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=62073)}),_N_E=e.O()}]);