(()=>{var e={};e.id=505,e.ids=[505],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},7571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(9655),r(1506),r(5866);var a=r(3191),s=r(8716),l=r(7922),n=r.n(l),o=r(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["postProperty",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9655)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\postProperty\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\postProperty\\page.tsx"],u="/postProperty/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/postProperty/page",pathname:"/postProperty",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5543:(e,t,r)=>{Promise.resolve().then(r.bind(r,4450))},6316:(e,t,r)=>{Promise.resolve().then(r.bind(r,8977))},1374:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2366:(e,t,r)=>{"use strict";r.d(t,{R:()=>n,b:()=>o});var a=r(326),s=r(7577);let l=(0,s.createContext)(void 0),n=({children:e})=>{let[t,r]=(0,s.useState)(null),[n,o]=(0,s.useState)(null),[i,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null);return a.jsx(l.Provider,{value:{user:t,setUser:r,userType:n,setUserType:o,userId:i,setUserId:d,firstListingFree:c,setFirstListingFree:u},children:e})},o=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useGlobalContext must be used within a GlobalProvider");return e}},4450:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var a=r(326),s=r(7577),l=r(434),n=r(6226),o=r(5047),i=r(2366);let d=()=>{let{user:e}=(0,i.b)();return a.jsx("div",{className:"text-center",children:e?a.jsx("p",{className:"text-lg font-bold text-black",children:e}):(0,a.jsxs)("p",{children:["אין לך חשבון? ",a.jsx("a",{href:"/login",className:"text-black",children:"התחבר כאן"})]})})},c=()=>{let e=(0,o.usePathname)(),[t,r]=(0,s.useState)(null),[i,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{r(localStorage.getItem("userRole"))},[]),a.jsx("nav",{className:"bg-luxury-gold text-white p-4",children:(0,a.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(l.default,{href:"/",className:"text-xl font-bold",children:a.jsx(n.default,{src:"/logo.png",alt:"Logo",width:120,height:50,priority:!0})}),a.jsx(d,{})," "]}),a.jsx("button",{className:"block lg:hidden text-2xl",onClick:()=>c(!i),children:i?"✖":"☰"}),(0,a.jsxs)("div",{className:`flex flex-col lg:flex-row lg:items-center ${i?"block":"hidden"} lg:flex lg:space-x-6`,children:[a.jsx(l.default,{href:"/",className:`hover:text-zinc-950 ${"/"===e?"font-bold":""}`,children:"דף הבית"}),a.jsx(l.default,{href:"/login",className:`hover:text-zinc-950 ${"/login"===e?"font-bold":""}`,children:"התחברות"}),a.jsx(l.default,{href:"/about",className:`hover:text-zinc-950 ${"/about"===e?"font-bold":""}`,children:"אודות"}),a.jsx(l.default,{href:"/adminInterface/ShowUsers",className:`hover:text-zinc-950 ${"/adminInterface/ShowUsers"===e?"font-bold":""}`,children:"הצגת משתמשים"}),a.jsx(l.default,{href:"/adminInterface/ShowApartments",className:`hover:text-zinc-950 ${"/adminInterface/ShowApartments"===e?"font-bold":""}`,children:"הצגת דירות"}),a.jsx(l.default,{href:"/postProperty",className:`
              bg-black text-luxury-gold 
              border-2 border-white rounded-lg px-6 py-3 
              font-bold shadow-lg transition duration-300
              ${"/postProperty"===e?"bg-white text-black":"hover:bg-gray-800 hover:text-yellow-400"}
            `,children:"פרסום נכס"}),"admin"===t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.default,{href:"/admin/dashboard",className:`hover:text-zinc-950 ${"/admin/dashboard"===e?"font-bold":""}`,children:"לוח בקרה למנהל"}),a.jsx(l.default,{href:"/admin/users",className:`hover:text-zinc-950 ${"/admin/users"===e?"font-bold":""}`,children:"ניהול משתמשים"})]})]})]})})},u=({className:e})=>a.jsx("footer",{className:`bg-luxury-gold text-white py-4 mt-auto ${e}`,children:(0,a.jsxs)("div",{className:"container mx-auto text-center",children:[(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Malki Anshin Digital"]}),a.jsx("div",{className:"space-x-4",children:a.jsx("a",{href:"mailto:MALKI148148@gmail.com",className:"hover:text-zinc-950",children:"❤️ בניית אתרים במגע אישי ומקצועי"})})]})});r(4047);var p=r(649),h=r(925),m=r(5870),x=r(9156),g=r(9427);let b=e=>{let t=(0,s.useRef)(null),[r]=(0,s.useState)(()=>g.Qm(new Float32Array(5001),{radius:.9}));return(0,p.F)((e,r)=>{t.current&&(t.current.rotation.x-=r/10,t.current.rotation.y-=r/15)}),a.jsx("group",{rotation:[0,0,Math.PI/4],children:a.jsx(m.wo,{ref:t,positions:r,stride:3,frustumCulled:!0,...e,children:a.jsx(x.C,{transparent:!0,color:"#fff",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},f=function(){return a.jsx("div",{className:"w-full h-auto fixed inset-0 z-[0] bg-gradient-to-b from-black via-gray-900 to-luxury-gold",children:a.jsx(h.Xz,{camera:{position:[0,0,1]},children:a.jsx(s.Suspense,{fallback:null,children:a.jsx(b,{})})})})},v=(0,s.createContext)(null),j=({children:e})=>{let[t,r]=(0,s.useState)(null);return a.jsx(v.Provider,{value:{user:t,setUser:r},children:e})},y=({children:e})=>{let{setUser:t,setUserType:r}=(0,i.b)();return(0,s.useEffect)(()=>{let e=localStorage.getItem("user");if(e){let{username:a,userType:s}=JSON.parse(e);t(a),r(s)}},[t,r]),a.jsx("html",{lang:"he",children:(0,a.jsxs)("body",{className:"flex flex-col min-h-screen relative",children:[(0,a.jsxs)("div",{className:"absolute inset-0 z-[-1] pointer-events-none",children:[a.jsx(f,{}),a.jsx("div",{className:"absolute inset-x-0 top-[150px] flex items-center justify-center",style:{backgroundImage:"url('/logo.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.3,minHeight:"330px",maxHeight:"70vh"}})]}),a.jsx(c,{}),a.jsx("main",{className:"flex-grow relative z-10",children:e}),a.jsx(u,{className:"relative z-10"})]})})},N=({children:e})=>a.jsx(i.R,{children:a.jsx(j,{children:a.jsx(y,{children:e})})})},8977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(326),s=r(7577),l=r(2366),n=r(5047);let o=()=>{let[e,t]=(0,s.useState)(""),[r,o]=(0,s.useState)(""),[i,d]=(0,s.useState)(""),[c,u]=(0,s.useState)([]),[p,h]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[g,b]=(0,s.useState)([]),[f,v]=(0,s.useState)(!1),[j,y]=(0,s.useState)("Apartment"),[N,w]=(0,s.useState)(!1),[S,P]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[A,F]=(0,s.useState)(""),[z,_]=(0,s.useState)(""),[I,E]=(0,s.useState)(!1),[$,q]=(0,s.useState)(""),M=(0,n.useRouter)(),{user:D,userId:O,firstListingFree:R,setFirstListingFree:G}=(0,l.b)();(0,s.useEffect)(()=>{D?!0===R&&M.push("/payment"):(alert("משתמש לא מחובר נא לבצע התחברות"),M.push("/login"))},[]);let L=async e=>{try{let t=await fetch("https://data.gov.il/api/3/action/datastore_search?resource_id=d4901968-dad3-4845-a9b0-a57d027f11ab");if(!t.ok)throw Error("Network response was not ok");let r=await t.json();if(r.success&&r.result&&r.result.records){let t=r.result.records.map(e=>e["שם_ישוב"]).filter(t=>""!==t&&t.toLowerCase().includes(e.toLowerCase()));b(t)}}catch(e){console.error("Error fetching cities:",e)}},U=e=>{x(e),b([])},B=async t=>{if(t.preventDefault(),0>=Number(r)||0>=Number(i)){h("Price and Rooms must be positive numbers");return}if(R){M.push("/payment");return}let a=new FormData;a.append("neighborhood",e),a.append("price",r),a.append("rooms",i.toString()),a.append("city",m),a.append("propertyType",j),a.append("userId",O?.toString()||""),a.append("parking",N.toString()),a.append("warehouse",S.toString()),a.append("elevator",k.toString()),a.append("address",A),a.append("contactSeller",z),a.append("floor",$.toString()),a.append("hasBalcony",I.toString()),c.forEach(e=>{a.append("images",e)}),v(!0);try{let e=await fetch("/api/postProperty",{method:"POST",body:a}),t=await e.json();if(e.ok){h(`Property added successfully! Property ID: ${t.propertyId}`),T(),M.push("/");let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.firstListingFree=!0,localStorage.setItem("user",JSON.stringify(t))}G(!0)}else h(`Error: ${t.error}`)}catch(e){h("Error submitting property")}finally{v(!1)}},T=()=>{t(""),o(""),d(""),u([]),h(""),x(""),y("Apartment"),w(!1),P(!1),C(!1),F(""),_(""),q(""),E(!1)};return(0,a.jsxs)("div",{className:"bg-gray-800 text-white p-6 rounded-md relative",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Property"}),(0,a.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"propertyType",className:"block mb-2",children:"Property Type"}),(0,a.jsxs)("select",{id:"propertyType",value:j,onChange:e=>y(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",children:[a.jsx("option",{value:"Apartment",children:"Apartment"}),a.jsx("option",{value:"Project",children:"Project"}),a.jsx("option",{value:"Land",children:"Land"}),a.jsx("option",{value:"Business",children:"Business"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"city",className:"block mb-2",children:"City"}),a.jsx("input",{type:"text",id:"city",value:m,onChange:e=>{let t=e.target.value;x(t),t?L(t):b([])},className:"bg-gray-700 p-2 rounded-md w-full",placeholder:"Choose a city"}),g.length>0&&a.jsx("ul",{className:"absolute bg-gray-600 text-white border border-gray-500 w-full max-h-60 overflow-y-auto z-10",children:g.map(e=>a.jsx("li",{onClick:()=>U(e),className:"cursor-pointer hover:bg-gray-500 p-2",children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"neighborhood",className:"block mb-2",children:"Neighborhood"}),a.jsx("input",{type:"text",id:"neighborhood",value:e,onChange:e=>t(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"price",className:"block mb-2",children:"Price"}),a.jsx("input",{type:"number",id:"price",value:r,onChange:e=>o(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"rooms",className:"block mb-2",children:"Rooms"}),a.jsx("input",{type:"number",id:"rooms",value:i,onChange:e=>d(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"floor",className:"block mb-2",children:"Floor"}),a.jsx("input",{type:"number",id:"floor",value:$,onChange:e=>q(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full"})]}),a.jsx("div",{children:(0,a.jsxs)("label",{htmlFor:"hasBalcony",className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",id:"hasBalcony",checked:I,onChange:()=>E(!I),className:"mr-2"}),"Has Balcony"]})}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"address",className:"block mb-2",children:"Address"}),a.jsx("input",{type:"text",id:"address",value:A,onChange:e=>F(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"contactSeller",className:"block mb-2",children:"Contact Seller"}),a.jsx("input",{type:"text",id:"contactSeller",value:z,onChange:e=>_(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full"})]}),a.jsx("div",{children:(0,a.jsxs)("label",{htmlFor:"parking",className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",id:"parking",checked:N,onChange:()=>w(!N),className:"mr-2"}),"Parking"]})}),a.jsx("div",{children:(0,a.jsxs)("label",{htmlFor:"warehouse",className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",id:"warehouse",checked:S,onChange:()=>P(!S),className:"mr-2"}),"Warehouse"]})}),a.jsx("div",{children:(0,a.jsxs)("label",{htmlFor:"elevator",className:"flex items-center mb-2",children:[a.jsx("input",{type:"checkbox",id:"elevator",checked:k,onChange:()=>C(!k),className:"mr-2"}),"Elevator"]})}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"images",className:"block mb-2",children:"Upload Images"}),a.jsx("input",{type:"file",id:"images",multiple:!0,onChange:e=>{e.target.files&&u(Array.from(e.target.files))},className:"bg-gray-700 p-2 rounded-md w-full"})]}),a.jsx("button",{type:"submit",className:`bg-blue-500 text-white py-2 rounded-md w-full ${f?"opacity-50 cursor-not-allowed":""}`,disabled:f,children:f?"Loading...":"Add Property"}),p&&a.jsx("p",{className:"text-red-500",children:p})]})]})}},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\Malki\OneDrive\שולחן העבודה\פרויקט מאגר דירות\Apartments\app\layout.tsx#default`)},9655:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\Malki\OneDrive\שולחן העבודה\פרויקט מאגר דירות\Apartments\app\postProperty\page.tsx#default`)},7481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(6621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},4047:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,562,621],()=>r(7571));module.exports=a})();