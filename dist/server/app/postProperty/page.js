(()=>{var e={};e.id=505,e.ids=[505],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},7571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(5276),r(4403),r(996);var s=r(170),a=r(5002),l=r(3876),n=r.n(l),o=r(6299),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["postProperty",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5276)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\postProperty\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4403)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\postProperty\\page.tsx"],u="/postProperty/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/postProperty/page",pathname:"/postProperty",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5543:(e,t,r)=>{Promise.resolve().then(r.bind(r,7378))},6316:(e,t,r)=>{Promise.resolve().then(r.bind(r,7610))},1374:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3642,23)),Promise.resolve().then(r.t.bind(r,7586,23)),Promise.resolve().then(r.t.bind(r,7838,23)),Promise.resolve().then(r.t.bind(r,8057,23)),Promise.resolve().then(r.t.bind(r,7741,23)),Promise.resolve().then(r.t.bind(r,3118,23))},5585:(e,t,r)=>{"use strict";r.d(t,{R:()=>n,b:()=>o});var s=r(7247),a=r(8964);let l=(0,a.createContext)(void 0),n=({children:e})=>{let[t,r]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(null);return s.jsx(l.Provider,{value:{user:t,setUser:r,userType:n,setUserType:o,userId:i,setUserId:d,firstListingFree:c,setFirstListingFree:u},children:e})},o=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useGlobalContext must be used within a GlobalProvider");return e}},7378:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(7247),a=r(8964),l=r(9906),n=r(4597),o=r(4178),i=r(5585);let d=()=>{let{user:e}=(0,i.b)();return s.jsx("div",{className:"text-center",children:e?s.jsx("p",{className:"text-lg font-bold text-black",children:e}):(0,s.jsxs)("p",{children:["אין לך חשבון? ",s.jsx("a",{href:"/login",className:"text-black",children:"התחבר כאן"})]})})},c=()=>{let e=(0,o.usePathname)(),[t,r]=(0,a.useState)(null),[i,c]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{r(localStorage.getItem("userRole"))},[]),s.jsx("nav",{className:"bg-luxury-gold text-white p-4",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx(l.default,{href:"/",className:"text-xl font-bold",children:s.jsx(n.default,{src:"/logo.png",alt:"Logo",width:120,height:50,priority:!0})}),s.jsx(d,{})," "]}),s.jsx("button",{className:"block lg:hidden text-2xl",onClick:()=>c(!i),children:i?"✖":"☰"}),(0,s.jsxs)("div",{className:`flex flex-col lg:flex-row lg:items-center ${i?"block":"hidden"} lg:flex lg:space-x-6`,children:[s.jsx(l.default,{href:"/",className:`hover:text-zinc-950 ${"/"===e?"font-bold":""}`,children:"דף הבית"}),s.jsx(l.default,{href:"/login",className:`hover:text-zinc-950 ${"/login"===e?"font-bold":""}`,children:"התחברות"}),s.jsx(l.default,{href:"/about",className:`hover:text-zinc-950 ${"/about"===e?"font-bold":""}`,children:"אודות"}),s.jsx(l.default,{href:"/adminInterface/ShowUsers",className:`hover:text-zinc-950 ${"/adminInterface/ShowUsers"===e?"font-bold":""}`,children:"הצגת משתמשים"}),s.jsx(l.default,{href:"/adminInterface/ShowApartments",className:`hover:text-zinc-950 ${"/adminInterface/ShowApartments"===e?"font-bold":""}`,children:"הצגת דירות"}),s.jsx(l.default,{href:"/postProperty",className:`
              bg-black text-luxury-gold 
              border-2 border-white rounded-lg px-6 py-3 
              font-bold shadow-lg transition duration-300
              ${"/postProperty"===e?"bg-white text-black":"hover:bg-gray-800 hover:text-yellow-400"}
            `,children:"פרסום נכס"}),"admin"===t&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.default,{href:"/admin/dashboard",className:`hover:text-zinc-950 ${"/admin/dashboard"===e?"font-bold":""}`,children:"לוח בקרה למנהל"}),s.jsx(l.default,{href:"/admin/users",className:`hover:text-zinc-950 ${"/admin/users"===e?"font-bold":""}`,children:"ניהול משתמשים"})]})]})]})})},u=({className:e})=>s.jsx("footer",{className:`bg-luxury-gold text-white py-4 mt-auto ${e}`,children:(0,s.jsxs)("div",{className:"container mx-auto text-center",children:[(0,s.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Malki Anshin Digital"]}),s.jsx("div",{className:"space-x-4",children:s.jsx("a",{href:"mailto:MALKI148148@gmail.com",className:"hover:text-zinc-950",children:"❤️ בניית אתרים במגע אישי ומקצועי"})})]})});r(4047);var p=r(2321),h=r(9113),m=r(6954),x=r(6503),g=r(8072);let b=e=>{let t=(0,a.useRef)(null),[r]=(0,a.useState)(()=>g.Qm(new Float32Array(5001),{radius:.9}));return(0,p.F)((e,r)=>{t.current&&(t.current.rotation.x-=r/10,t.current.rotation.y-=r/15)}),s.jsx("group",{rotation:[0,0,Math.PI/4],children:s.jsx(m.wo,{ref:t,positions:r,stride:3,frustumCulled:!0,...e,children:s.jsx(x.C,{transparent:!0,color:"#fff",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},f=function(){return s.jsx("div",{className:"w-full h-auto fixed inset-0 z-[0] bg-gradient-to-b from-black via-gray-900 to-luxury-gold",children:s.jsx(h.Xz,{camera:{position:[0,0,1]},children:s.jsx(a.Suspense,{fallback:null,children:s.jsx(b,{})})})})},v=(0,a.createContext)(null),j=({children:e})=>{let[t,r]=(0,a.useState)(null);return s.jsx(v.Provider,{value:{user:t,setUser:r},children:e})},y=({children:e})=>{let{setUser:t,setUserType:r}=(0,i.b)();return(0,a.useEffect)(()=>{let e=localStorage.getItem("user");if(e){let{username:s,userType:a}=JSON.parse(e);t(s),r(a)}},[t,r]),s.jsx("html",{lang:"he",children:(0,s.jsxs)("body",{className:"flex flex-col min-h-screen relative",children:[(0,s.jsxs)("div",{className:"absolute inset-0 z-[-1] pointer-events-none",children:[s.jsx(f,{}),s.jsx("div",{className:"absolute inset-x-0 top-[150px] flex items-center justify-center",style:{backgroundImage:"url('/logo.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",opacity:.3,minHeight:"330px",maxHeight:"70vh"}})]}),s.jsx(c,{}),s.jsx("main",{className:"flex-grow relative z-10",children:e}),s.jsx(u,{className:"relative z-10"})]})})},N=({children:e})=>s.jsx(i.R,{children:s.jsx(j,{children:s.jsx(y,{children:e})})})},7610:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(7247),a=r(8964),l=r(5585),n=r(4178);let o=()=>{let[e,t]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)([]),[p,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[g,b]=(0,a.useState)([]),[f,v]=(0,a.useState)(!1),[j,y]=(0,a.useState)("Apartment"),[N,w]=(0,a.useState)(!1),[S,P]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[A,F]=(0,a.useState)(""),[z,_]=(0,a.useState)(""),[I,E]=(0,a.useState)(!1),[$,q]=(0,a.useState)(""),M=(0,n.useRouter)(),{user:D,userId:O,firstListingFree:R,setFirstListingFree:G}=(0,l.b)();(0,a.useEffect)(()=>{D?!0===R&&M.push("/payment"):(alert("משתמש לא מחובר נא לבצע התחברות"),M.push("/login"))},[]);let L=async e=>{try{let t=await fetch("https://data.gov.il/api/3/action/datastore_search?resource_id=d4901968-dad3-4845-a9b0-a57d027f11ab");if(!t.ok)throw Error("Network response was not ok");let r=await t.json();if(r.success&&r.result&&r.result.records){let t=r.result.records.map(e=>e["שם_ישוב"]).filter(t=>""!==t&&t.toLowerCase().includes(e.toLowerCase()));b(t)}}catch(e){console.error("Error fetching cities:",e)}},U=e=>{x(e),b([])},B=async t=>{if(t.preventDefault(),console.log(`user id :::::::::::::::::::${O}`),0>=Number(r)||0>=Number(i)){h("Price and Rooms must be positive numbers");return}if(R){M.push("/payment");return}let s=new FormData;s.append("neighborhood",e),s.append("price",r),s.append("rooms",i.toString()),s.append("city",m),s.append("propertyType",j),s.append("userId",O?.toString()||""),s.append("parking",N.toString()),s.append("warehouse",S.toString()),s.append("elevator",k.toString()),s.append("address",A),s.append("contactSeller",z),s.append("floor",$.toString()),s.append("hasBalcony",I.toString()),c.forEach(e=>{s.append("images",e)}),v(!0);try{let e=await fetch("/api/postProperty",{method:"POST",body:s}),t=await e.json();if(e.ok){h(`Property added successfully! Property ID: ${t.propertyId}`),T(),M.push("/");let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.firstListingFree=!0,localStorage.setItem("user",JSON.stringify(t))}G(!0)}else h(`Error: ${t.error}`)}catch(e){h("Error submitting property")}finally{v(!1)}},T=()=>{t(""),o(""),d(""),u([]),h(""),x(""),y("Apartment"),w(!1),P(!1),C(!1),F(""),_(""),q(""),E(!1)};return(0,s.jsxs)("div",{className:"bg-gray-800 text-white p-6 rounded-md relative",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Add New Property"}),(0,s.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"propertyType",className:"block mb-2",children:"Property Type"}),(0,s.jsxs)("select",{id:"propertyType",value:j,onChange:e=>y(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",children:[s.jsx("option",{value:"Apartment",children:"Apartment"}),s.jsx("option",{value:"Project",children:"Project"}),s.jsx("option",{value:"Land",children:"Land"}),s.jsx("option",{value:"Business",children:"Business"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"city",className:"block mb-2",children:"City"}),s.jsx("input",{type:"text",id:"city",value:m,onChange:e=>{let t=e.target.value;x(t),t?L(t):b([])},className:"bg-gray-700 p-2 rounded-md w-full",placeholder:"Choose a city"}),g.length>0&&s.jsx("ul",{className:"absolute bg-gray-600 text-white border border-gray-500 w-full max-h-60 overflow-y-auto z-10",children:g.map(e=>s.jsx("li",{onClick:()=>U(e),className:"cursor-pointer hover:bg-gray-500 p-2",children:e},e))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"neighborhood",className:"block mb-2",children:"Neighborhood"}),s.jsx("input",{type:"text",id:"neighborhood",value:e,onChange:e=>t(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"price",className:"block mb-2",children:"Price"}),s.jsx("input",{type:"number",id:"price",value:r,onChange:e=>o(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"rooms",className:"block mb-2",children:"Rooms"}),s.jsx("input",{type:"number",id:"rooms",value:i,onChange:e=>d(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"floor",className:"block mb-2",children:"Floor"}),s.jsx("input",{type:"number",id:"floor",value:$,onChange:e=>q(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full"})]}),s.jsx("div",{children:(0,s.jsxs)("label",{htmlFor:"hasBalcony",className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"hasBalcony",checked:I,onChange:()=>E(!I),className:"mr-2"}),"Has Balcony"]})}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"address",className:"block mb-2",children:"Address"}),s.jsx("input",{type:"text",id:"address",value:A,onChange:e=>F(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"contactSeller",className:"block mb-2",children:"Contact Seller"}),s.jsx("input",{type:"text",id:"contactSeller",value:z,onChange:e=>_(e.target.value),className:"bg-gray-700 p-2 rounded-md w-full"})]}),s.jsx("div",{children:(0,s.jsxs)("label",{htmlFor:"parking",className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"parking",checked:N,onChange:()=>w(!N),className:"mr-2"}),"Parking"]})}),s.jsx("div",{children:(0,s.jsxs)("label",{htmlFor:"warehouse",className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"warehouse",checked:S,onChange:()=>P(!S),className:"mr-2"}),"Warehouse"]})}),s.jsx("div",{children:(0,s.jsxs)("label",{htmlFor:"elevator",className:"flex items-center mb-2",children:[s.jsx("input",{type:"checkbox",id:"elevator",checked:k,onChange:()=>C(!k),className:"mr-2"}),"Elevator"]})}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"images",className:"block mb-2",children:"Upload Images"}),s.jsx("input",{type:"file",id:"images",multiple:!0,onChange:e=>{e.target.files&&u(Array.from(e.target.files))},className:"bg-gray-700 p-2 rounded-md w-full"})]}),s.jsx("button",{type:"submit",className:`bg-blue-500 text-white py-2 rounded-md w-full ${f?"opacity-50 cursor-not-allowed":""}`,disabled:f,children:f?"Loading...":"Add Property"}),p&&s.jsx("p",{className:"text-red-500",children:p})]})]})}},4403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(5347).createProxy)(String.raw`C:\Users\Malki\OneDrive\שולחן העבודה\פרויקט מאגר דירות\Apartments\app\layout.tsx#default`)},5276:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(5347).createProxy)(String.raw`C:\Users\Malki\OneDrive\שולחן העבודה\פרויקט מאגר דירות\Apartments\app\postProperty\page.tsx#default`)},7481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(4564);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},4047:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,92,564],()=>r(7571));module.exports=s})();