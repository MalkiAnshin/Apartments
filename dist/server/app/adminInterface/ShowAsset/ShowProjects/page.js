(()=>{var e={};e.id=4830,e.ids=[4830],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},40662:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>i}),r(75404),r(11506),r(35866);var s=r(23191),l=r(88716),a=r(37922),o=r.n(a),n=r(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let i=["",{children:["adminInterface",{children:["ShowAsset",{children:["ShowProjects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75404)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\adminInterface\\ShowAsset\\ShowProjects\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\adminInterface\\ShowAsset\\ShowProjects\\page.tsx"],m="/adminInterface/ShowAsset/ShowProjects/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/adminInterface/ShowAsset/ShowProjects/page",pathname:"/adminInterface/ShowAsset/ShowProjects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},23894:(e,t,r)=>{Promise.resolve().then(r.bind(r,17157))},17157:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(10326),l=r(17577),a=r(86029),o=r(1571);let n=()=>{let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(null),[d,i]=(0,l.useState)(null),[c,m]=(0,l.useState)({min:0,max:1e8}),[x,h]=(0,l.useState)(0),[p,g]=(0,l.useState)([]),[u,b]=(0,l.useState)(null),[j,f]=(0,l.useState)(!1),w=async()=>{try{let e=encodeURIComponent(d?.trim()||""),r=await fetch(`/api/AdminInterface/ShowAsset/ShowProjects?city=${e}`);if(!r.ok)throw Error("Response from server was not OK");let s=await r.json();t(s)}catch(e){n("Error fetching apartments: "+(e instanceof Error?e.message:"Unknown error")),console.error(e)}},N=async r=>{if(window.confirm("האם אתה בטוח שברצונך למחוק נכס זה?"))try{if(!(await fetch(`/api/AdminInterface/DeletedAsset/DeleteProject?property_id=${r}`,{method:"DELETE"})).ok)throw Error("מחיקה נכשלה");alert("הדירה נמחקה בהצלחה"),t(e.filter(e=>e.property_id!==r))}catch(e){n("Error deleting project: "+(e instanceof Error?e.message:"Unknown error")),console.error(e)}},y=async e=>{try{b(e);let t=await fetch(`/api/AdminInterface/contracts?property_id=${e}`);if(!t.ok)throw Error("Response from server was not OK");let r=await t.json();g(r),f(!0)}catch(e){n("Error fetching contracts: "+(e instanceof Error?e.message:"Unknown error")),console.error(e)}};(0,l.useEffect)(()=>{w()},[d]);let v=e.filter(e=>{let t=e.price>=c.min&&e.price<=c.max,r=!x||e.rooms===x;return t&&r}),_=(e,t)=>{let r=`/contracts/${e}/${t}/contract.pdf`;try{window.open(r,"_blank"),console.log("נפתח חלון חדש עם ה-PDF")}catch(e){console.error("שגיאה בפתיחת ה-PDF:",e)}},P=(e,t)=>{let r=`/contracts/${e}/${t}/id_image.png`,s=`/contracts/${e}/${t}/id_image.jpg`,l=e=>{window.open(e,"_blank")};l(r),l(s)};return s.jsx("div",{className:"bg-transparent text-white min-h-screen flex flex-col items-center p-6",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6 text-gold text-center",children:"רשימת נכסים"}),r&&(0,s.jsxs)("div",{className:"text-red-600 mb-4 text-center",children:["שגיאה: ",r]}),s.jsx(a.Z,{onPriceChange:m,onRoomsChange:h}),s.jsx(o.Z,{onCitySelect:i}),v.length>0?(0,s.jsxs)("table",{className:"min-w-full bg-transparent border border-gold mb-6",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gold",children:[s.jsx("th",{className:"text-left p-4",children:"מזהה נכס"}),s.jsx("th",{className:"text-left p-4",children:"עיר"}),s.jsx("th",{className:"text-left p-4",children:"מחיר"}),s.jsx("th",{className:"text-left p-4",children:"חדרים"}),s.jsx("th",{className:"text-left p-4",children:"פעולה"})]})}),s.jsx("tbody",{children:v.map(e=>(0,s.jsxs)("tr",{className:`border-b border-gold ${u===e.property_id?"bg-gold/10":""}`,children:[s.jsx("td",{className:"p-4",children:e.property_id}),s.jsx("td",{className:"p-4",children:e.city}),s.jsx("td",{className:"p-4",children:Number(e.price).toLocaleString("he-IL",{maximumFractionDigits:0})}),s.jsx("td",{className:"p-4",children:e.rooms}),s.jsx("button",{onClick:()=>N(e.property_id),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700",children:"מחק נכס"}),s.jsx("td",{className:"p-4",children:s.jsx("button",{onClick:()=>y(e.property_id),className:"bg-gold text-black px-4 py-2 rounded hover:bg-yellow-600",children:"הצג חוזים"})})]},e.property_id))})]}):s.jsx("p",{className:"text-gray-400 text-center",children:"...טוען"}),j&&s.jsx("div",{className:"fixed inset-0 bg-black/70 flex justify-center items-center z-50",children:(0,s.jsxs)("div",{className:"bg-black text-gold p-6 rounded-lg max-w-4xl w-full max-h-screen overflow-auto",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"חוזים"}),s.jsx("button",{onClick:()=>f(!1),className:"text-red-500 mb-4 text-lg",children:"סגור"}),(0,s.jsxs)("div",{className:"overflow-x-auto max-h-80",children:[" ",(0,s.jsxs)("table",{className:"min-w-full bg-transparent border border-gold rounded-lg overflow-hidden shadow-lg",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gold text-gold",children:[s.jsx("th",{className:"p-4",children:"מזהה חוזה"}),s.jsx("th",{className:"p-4",children:"מזהה נכס"}),s.jsx("th",{className:"p-4",children:"סוג נכס"}),s.jsx("th",{className:"p-4 text-center",children:"תאריך"}),s.jsx("th",{className:"p-4",children:"מזהה משתמש"})]})}),s.jsx("tbody",{children:p.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-gold hover:bg-gold/10 transition",children:[s.jsx("td",{className:"p-4 text-gold",children:e.contract_id}),s.jsx("td",{className:"p-4 text-gold",children:e.property_id}),s.jsx("td",{className:"p-4 text-gold",children:e.property_type}),s.jsx("td",{className:"p-4 text-gold",children:e.signed_date}),s.jsx("td",{className:"p-4 text-gold",children:e.user_id}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{className:"bg-transparent border border-gold text-gold py-1 px-3 rounded hover:bg-gold hover:text-black transition shadow-gold-glow",onClick:()=>_(e.property_type,e.contract_id),children:"הצגת החוזה"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{className:"bg-transparent border border-gold text-gold py-1 px-3 rounded hover:bg-gold hover:text-black transition shadow-gold-glow",onClick:()=>P(e.property_type,e.contract_id),children:"הצגת צילום ת.ז."})})]},t))})]})]})]})})]})})}},86029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326),l=r(17577);let a=({onPriceChange:e,onRoomsChange:t})=>{let[r,a]=(0,l.useState)(0),[o,n]=(0,l.useState)(6e8);return(0,s.jsxs)("div",{className:"filters-container mb-6 bg-transparent rounded-lg shadow-lg p-6 max-w-md mx-auto space-y-6",dir:"rtl",children:[(0,s.jsxs)("div",{className:"filter-item",children:[s.jsx("label",{className:"block text-gold font-semibold mb-2 text-right",children:"טווח מחיר:"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("div",{className:"w-1/2",children:[s.jsx("label",{htmlFor:"minPrice",className:"block text-gold-lighter text-sm mb-1 text-right",children:"מינימום"}),s.jsx("input",{type:"number",id:"minPrice",min:"0",max:"600000000",step:"50000",value:r,onChange:t=>{let r=Number(t.target.value);a(r),e({min:r,max:o})},className:"w-full bg-transparent border border-gold rounded-lg py-2 px-3 text-gold focus:outline-none focus:border-gold-light placeholder-gold-lighter",placeholder:"מינימום"})]}),(0,s.jsxs)("div",{className:"w-1/2",children:[s.jsx("label",{htmlFor:"maxPrice",className:"block text-gold-lighter text-sm mb-1 text-right",children:"מקסימום"}),s.jsx("input",{type:"number",id:"maxPrice",min:"0",max:"600000000",step:"50000",value:o,onChange:t=>{let s=Number(t.target.value);n(s),e({min:r,max:s})},className:"w-full bg-transparent border border-gold rounded-lg py-2 px-3 text-gold focus:outline-none focus:border-gold-light placeholder-gold-lighter",placeholder:"מקסימום"})]})]})]}),(0,s.jsxs)("div",{className:"filter-item",children:[s.jsx("label",{htmlFor:"rooms",className:"block text-gold font-semibold mb-2 text-right",children:"חדרים:"}),s.jsx("input",{type:"number",id:"rooms",min:"1",onChange:e=>{t(Number(e.target.value))},className:"w-full bg-transparent border border-gold rounded-lg py-2 px-3 text-gold focus:outline-none focus:border-gold-light placeholder-gold-lighter",placeholder:"בחר מספר חדרים"})]})]})}},75404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\Malki\OneDrive\שולחן העבודה\פרויקט מאגר דירות\Apartments\app\adminInterface\ShowAsset\ShowProjects\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5562,238],()=>r(40662));module.exports=s})();