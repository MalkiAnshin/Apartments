(()=>{var e={};e.id=130,e.ids=[130],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6217:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(753),r(4403),r(996);var s=r(170),a=r(5002),n=r(3876),l=r.n(n),i=r(6299),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let c=["",{children:["adminInterface",{children:["ShowApartments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,753)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\adminInterface\\ShowApartments\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4403)),"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\adminInterface\\ShowApartments\\page.tsx"],p="/adminInterface/ShowApartments/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/adminInterface/ShowApartments/page",pathname:"/adminInterface/ShowApartments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4714:(e,t,r)=>{Promise.resolve().then(r.bind(r,4218))},4218:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(7247),a=r(8964),n=r(7161),l=r(8894);let i=()=>{let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[d,p]=(0,a.useState)({min:0,max:1e6}),[m,x]=(0,a.useState)(0),h=async()=>{try{let e=o?.trim()||"",r=encodeURIComponent(e);console.log("Fetching apartments with city:",r);let s=await fetch(`/api/AdminInterface/ShowApartments?city=${r}`);if(!s.ok)throw Error("Response from server was not OK");let a=await s.json();console.log("Apartments fetched:",a),t(a)}catch(e){i("Error fetching apartments: "+(e instanceof Error?e.message:"Unknown error")),console.error("Error fetching apartments:",e)}};(0,a.useEffect)(()=>{console.log("Component mounted or city changed, fetching apartments..."),h()},[o]);let u=e.filter(e=>{let t=e.price>=d.min&&e.price<=d.max,r=!m||e.rooms===m,s=!o||e.city===o;return console.log("Apartment:",e.city,s,t,r),t&&r&&s});return s.jsx("div",{className:"bg-transparent text-white min-h-screen flex flex-col items-center p-6",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6 text-gold text-center",children:"רשימת דירות"}),r&&(0,s.jsxs)("div",{className:"text-red-600 mb-4 text-center",children:["שגיאה: ",r]}),s.jsx(n.Z,{onPriceChange:p,onRoomsChange:x}),s.jsx(l.Z,{onCitySelect:c}),u.length>0?(0,s.jsxs)("table",{className:"min-w-full bg-transparent border border-gold mb-6",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gold",children:[s.jsx("th",{className:"text-left p-4",children:"מזהה נכס"}),s.jsx("th",{className:"text-left p-4",children:"עיר"}),s.jsx("th",{className:"text-left p-4",children:"מחיר"}),s.jsx("th",{className:"text-left p-4",children:"חדרים"}),s.jsx("th",{className:"text-left p-4",children:"פרטי יצירת קשר"}),s.jsx("th",{className:"text-left p-4",children:"סוג מוכר"}),s.jsx("th",{className:"text-left p-4",children:"פעולה"})]})}),s.jsx("tbody",{children:u.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gold",children:[s.jsx("td",{className:"p-4",children:e.property_id}),s.jsx("td",{className:"p-4",children:e.city}),s.jsx("td",{className:"p-4",children:e.price}),s.jsx("td",{className:"p-4",children:e.rooms}),s.jsx("td",{className:"p-4",children:e.contact_seller}),s.jsx("td",{className:"p-4",children:e.seller_type}),s.jsx("td",{className:"p-4",children:s.jsx("button",{className:"bg-gold text-black px-4 py-2 rounded hover:bg-yellow-600",children:"הצג חוזים"})})]},e.property_id))})]}):s.jsx("p",{className:"text-gray-400 text-center",children:"...טוען"})]})})}},753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(5347).createProxy)(String.raw`C:\Users\Malki\OneDrive\שולחן העבודה\פרויקט מאגר דירות\Apartments\app\adminInterface\ShowApartments\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,92,564,720],()=>r(6217));module.exports=s})();