"use strict";(()=>{var e={};e.id=956,e.ids=[956],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},5315:e=>{e.exports=require("path")},6866:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var t={};r.r(t),r.d(t,{GET:()=>l});var o=r(3278),n=r(5002),i=r(4877),a=r(1309),u=r(8966),p=r(5315),c=r.n(p);async function l(e){try{let s=new URL(e.url).searchParams.get("id");if(!s)return a.NextResponse.json({error:"ID parameter is missing"},{status:400});console.log("Preparing to query for Business ID:",s);let r=await u.Z.query("SELECT image_paths FROM business WHERE property_id = $1",[s]);if(console.log("Query executed successfully. Result:",r.rows),0===r.rows.length)return a.NextResponse.json({error:"No images found for the given ID"},{status:404});let t=r.rows[0].image_paths;if(!t||0===t.length)return a.NextResponse.json({error:"No image paths available for the given ID"},{status:404});console.log("Image paths retrieved:",t);let o=t.map(e=>c().join(`/pictures/Business/${s}`,e));return a.NextResponse.json({images:o})}catch(e){return console.error("Error fetching business images:",e),a.NextResponse.json({error:"Internal Server Error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/businessPictures/route",pathname:"/api/businessPictures",filename:"route",bundlePath:"app/api/businessPictures/route"},resolvedPagePath:"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\api\\businessPictures\\route.tsx",nextConfigOutput:"",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:m}=d,v="/api/businessPictures/route";function x(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},8966:(e,s,r)=>{r.d(s,{Z:()=>o});let{Pool:t}=r(5900),o=new t({user:process.env.DB_USER,host:process.env.DB_HOST,database:process.env.DB_NAME,password:process.env.DB_PASSWORD,port:process.env.DB_PORT,ssl:{rejectUnauthorized:!1}})}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[379,833],()=>r(6866));module.exports=t})();