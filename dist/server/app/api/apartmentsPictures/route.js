"use strict";(()=>{var e={};e.id=2281,e.ids=[2281],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},35900:e=>{e.exports=require("pg")},54850:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{GET:()=>c,dynamic:()=>u});var a=t(49303),o=t(88716),n=t(60670),i=t(87070),p=t(68735);let u="force-dynamic";async function c(e){try{let r=e.headers.get("property_id");if(!r)return console.warn("No property_id provided in headers"),i.NextResponse.json({error:"ID parameter is missing in headers"},{status:400});let t=await p.Z.query("SELECT image_paths FROM apartments WHERE property_id = $1",[r]);if(0===t.rows.length)return console.warn("No images found for the given ID:",r),i.NextResponse.json({error:"No images found for the given ID"},{status:404});let s=t.rows[0].image_paths,a=Array.isArray(s)?s:s.replace(/[{}"]/g,"").split(",");if(!a||0===a.length)return console.warn("No image paths available for the given ID:",r),i.NextResponse.json({error:"No image paths available for the given ID"},{status:404});let o=a.map(e=>`https://www.schloss.co.il/userfiles/pictures/Apartment/${r}/${e}`);return i.NextResponse.json({images:o})}catch(e){return console.error("Error fetching apartments images:",e),i.NextResponse.json({error:"Internal Server Error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/apartmentsPictures/route",pathname:"/api/apartmentsPictures",filename:"route",bundlePath:"app/api/apartmentsPictures/route"},resolvedPagePath:"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקט מאגר דירות\\Apartments\\app\\api\\apartmentsPictures\\route.tsx",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:h}=l,g="/api/apartmentsPictures/route";function v(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},68735:(e,r,t)=>{t.d(r,{Z:()=>a});let{Pool:s}=t(35900),a=new s({user:process.env.DB_USER,host:process.env.DB_HOST,database:process.env.DB_NAME,password:process.env.DB_PASSWORD,port:process.env.DB_PORT,ssl:!1})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,5972],()=>t(54850));module.exports=s})();