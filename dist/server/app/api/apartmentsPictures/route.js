"use strict";(()=>{var e={};e.id=281,e.ids=[281],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1877:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{GET:()=>p});var s=t(9303),n=t(8716),a=t(670),i=t(7070),u=t(3141);async function p(e){try{let r=new URL(e.url).searchParams.get("id");if(!r)return i.NextResponse.json({error:"ID parameter is missing"},{status:400});let t=u.S;console.log("Preparing to query for ID:",r);try{let e=await t.query("SELECT image_paths FROM apartments WHERE property_id = $1",[r]);if(console.log("Query executed successfully. Result:",e.rows),0===e.rows.length)return i.NextResponse.json({error:"No images found for the given ID"},{status:404});let o=e.rows[0].image_paths;return console.log("Image paths retrieved:",o),i.NextResponse.json({images:o})}catch(e){return console.error("Error executing query:",e),i.NextResponse.json({error:"Query Error"},{status:500})}}catch(e){return console.error("Error fetching images:",e),i.NextResponse.json({error:"Internal Server Error"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/apartmentsPictures/route",pathname:"/api/apartmentsPictures",filename:"route",bundlePath:"app/api/apartmentsPictures/route"},resolvedPagePath:"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקטים\\פרויקט מאגר דירות\\Apartments\\app\\api\\apartmentsPictures\\route.tsx",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:d}=c,g="/api/apartmentsPictures/route";function h(){return(0,a.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},3141:(e,r,t)=>{t.d(r,{S:()=>s});let o=new(require("pg")).Pool({connectionString:"postgresql://malki:WmU3jPeMJaFHezTl1atXE7fr68Qe888v@dpg-crm2mj08fa8c73a0m2j0-a.frankfurt-postgres.render.com/render_db_jynp",connectionTimeoutMillis:3e4,idleTimeoutMillis:1e4,max:20}),s={query:async(e,r)=>{try{return console.log("Executing query:",e,r),await o.query(e,r)}catch(e){throw console.error("Error executing query:",e),e}},end:async()=>{try{await o.end()}catch(e){throw console.error("Error closing pool:",e),e}}}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972],()=>t(1877));module.exports=o})();