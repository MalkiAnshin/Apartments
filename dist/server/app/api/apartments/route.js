"use strict";(()=>{var e={};e.id=825,e.ids=[825],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5362:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{GET:()=>p});var a=t(9303),n=t(8716),s=t(670),i=t(7070),c=t(3141);async function p(e){try{console.log("111111111111. Start GET request");let r=new URL(e.url);console.log("222222222222. Request URL:",r.toString());let t=r.searchParams.get("city");console.log("3333333333333. City parameter:",t);let o="SELECT * FROM apartments",a=[];t?(o+=" WHERE city = $1",a.push(t),console.log("444444444444. Updated query with city:",o)):console.log("55555555555. No city parameter provided"),console.log("66666666666. Executing query:",o,"with params:",a);let{rows:n}=await c.S.query(o,a);return console.log("7777777777. Query result:",n),i.NextResponse.json(n)}catch(e){return console.error("8888888888888. Error fetching apartments:",e),i.NextResponse.json({error:"Error fetching apartments",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/apartments/route",pathname:"/api/apartments",filename:"route",bundlePath:"app/api/apartments/route"},resolvedPagePath:"C:\\Users\\Malki\\OneDrive\\שולחן העבודה\\פרויקטים\\פרויקט מאגר דירות\\Apartments\\app\\api\\apartments\\route.tsx",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:d}=u,g="/api/apartments/route";function y(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},3141:(e,r,t)=>{t.d(r,{S:()=>a});let o=new(require("pg")).Pool({connectionString:"postgresql://malki:WmU3jPeMJaFHezTl1atXE7fr68Qe888v@dpg-crm2mj08fa8c73a0m2j0-a.frankfurt-postgres.render.com/render_db_jynp",connectionTimeoutMillis:3e4,idleTimeoutMillis:1e4,max:20}),a={query:async(e,r)=>{try{return console.log("Executing query:",e,r),await o.query(e,r)}catch(e){throw console.error("Error executing query:",e),e}},end:async()=>{try{await o.end()}catch(e){throw console.error("Error closing pool:",e),e}}}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972],()=>t(5362));module.exports=o})();